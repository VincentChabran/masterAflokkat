
Installation Oracle NOSQL sous windows 10

--------------------------------------------------------------------------------------------------------
-- 0. Support de cours 
--------------------------------------------------------------------------------------------------------

Créer sur votre disque C ou D ou autre un dossier 
c:\TPBIGDATA
placez dans ce dossier le support disponible dans la dropbox sous mon nom
c:\TPBIGDATA\3Cours_NoSQL_BIGDATA_ETUDIANTS
set MYCOURSEHOME=c:\TPBIGDATA\3Cours_NoSQL_BIGDATA_ETUDIANTS

--------------------------------------------------------------------------------------------------------
-- 1.	Télécharger Oracle NoSql
--------------------------------------------------------------------------------------------------------

Priviligier la version la version ENTREPRISE qui correspond à l'année en cours
par exemple si on est en 2021
Oracle NoSql 21c
Cette numérotation suit celle du sgbd sql. Oracle 21c.

Lien vers le fichier à télécharger 
https://www.oracle.com/database/technologies/nosql-database-server-downloads.html
Télécharger la version .zip de l'année en cours comme indiquée plus haut.

Créer sur votre disque C : ou D : ou un autre, un répertoire ou déposer le ZIP
 
Exemple 
C:\Logiciels\13_ORACLE_NOSQL\1Last\


--------------------------------------------------------------------------------------------------------
-- 2.	Dézipper le ZIP
--------------------------------------------------------------------------------------------------------

Vous devez dézipper dans le dossier créé en 1.

--------------------------------------------------------------------------------------------------------
-- 3.	Fixer la variable d’environnement KVHOME
--------------------------------------------------------------------------------------------------------

Afin d'effectuer des vérifications et ensuite de lancer le serveur Oracle NoSql,
vous devez créer la variable d'environnement qui pointe vers le dossier 
sous lequel se trouve :LIB. LIB contient les .jar correspondant aux binaires d'Oracle NoSql

Lancer cmd ou l'invite DOS en tant qu'administrateur.

Exécuter la commande SET
Ma version de la commande :

Set KVHOME=C:\Logiciels\13_ORACLE_NOSQL\1Last\kv-ce-21.2.46\kv-21.2.46

Votre version de la commande :
Set KVHOME=?\kv-21.2.46

Remplacer le ? par votre chemin (voir le dezip).

Sous ce dossier dans ce trouver entre autre le dossier : LIB

NOTE IMPORTANTE : A chaque fois que vous ouvrirez un cmd pour 
vérifier l'installation, démarrer à nous le serveur
ou lancer un client, vous devez exécuter cette commande.

--------------------------------------------------------------------------------------------------------
-- 4.	Vérifier l’installation
--------------------------------------------------------------------------------------------------------

Une fois dézippé, l'installation est prête.

java -Xmx256m -Xms256m -jar %KVHOME%\lib\kvclient.jar
On voit la réponse suivante 
21.2.46 2022-05-24 20:36:59 UTC  Build id: 1b73ce65d872 Edition: Client


--------------------------------------------------------------------------------------------------------
-- 5.	Vérifier la version java et de la commande compilation javac
--------------------------------------------------------------------------------------------------------


D:\>java -version
java version "11.0.13" 2021-10-19 LTS
Java(TM) SE Runtime Environment 18.9 (build 11.0.13+10-LTS-370)
Java HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.13+10-LTS-370, mixed mode)

Si vous avez au moins 8.x.x cela devrait aussi marcher.

Vérification de la commande de compilation javac

D:\>javac

Vous devez voir ceci :
Usage: javac <options> <source files>
where possible options include:
  @<filename>                  Read options and filenames from file
  -Akey[=value]                Options to pass to annotation processors
  --add-modules <module>(,<module>)*
        Root modules to resolve in addition to the initial modules, or all modules
        on the module path if <module> is ALL-MODULE-PATH.
...

Si vous voyez 
'javac' n’est pas reconnu en tant que commande interne
ou externe, un programme exécutable ou un fichier de commandes.

Alors vous n'avez pas de JDK installé.

Installer le jdk en commençant d'abord par le télécharger sur le site d'Oracle :
https://www.oracle.com/fr/java/technologies/javase-downloads.html

Choisissez windows installer 64 bit ...

..
ou le zip
Après installation ou dezip, le jdk est installé dans :
C:\Program Files\Java\

Il faut mettre à jour la vairiable PATH de windows en plaçant au début le 
chemin équivant à celui ci :
C:\Program Files\Java\jdk-11.0.1\bin

Pour mettre à jour PATH il faut aller dans les propriétés de votre PC.
Mettez le chemin au début.

--------------------------------------------------------------------------------------------------------
-- 6.	Activation du serveur NOSQL KVLITE
--------------------------------------------------------------------------------------------------------

ouvrir un CMD puis lancer :
Ma version de KVHOME
Set KVHOME=C:\Logiciels\13_ORACLE_NOSQL\1Last\kv-ce-21.2.46\kv-21.2.46

votre version de KVHOME (voir point 3):
Set KVHOME=?\kv-21.2.19
Set KVHOME=C:\Logiciels\13_ORACLE_NOSQL\1Last\kv-ce-21.2.46\kv-21.2.46
-- activation du serveur
java -Xmx256m -Xms256m -jar %KVHOME%/lib/kvstore.jar kvlite -secure-config disable

Le serveur se lance et vous devez voir à peu prêt ce qui suit :
Opened existing kvlite store with config:
-root ./kvroot -store kvstore -host Gabriel -port 5000 -secure-config disable -restore-from-snapshot null -admin-web-port 0

La fenêtre se bloque et est attente de commande venant d'un client.
Il ne faut surtout pas la fermer.

Si vous avez des messages d'erreurs liées à des TIMEOUT par exemple, cela peut être dû
a votre parrefeu et/ou votre antivirus.
Autorisez lui à exécuter cette commande.
Vous pouvez être amené à désactiver :
- le wifi et le réseau
- ou l'antivirus et/ou le parefeu

J'ai dû désactiver l'antivirus suite au message d'erreur suivant :

Inactive socket Socket[addr=PC-GABRIEL/192.168.56.1,port=5000,localport=57241] timed out and was forcibly closed, timeout: 5000 ms
KVLite: exception in start: java.rmi.ConnectIOException: Problem connecting to the storage node agent, which may be caused by a security mismatch between the client and server, or by another network connectivity issue; nested exception is:
        java.rmi.ConnectIOException: error during JRMP connection establishment; nested exception is: 
        java.net.SocketTimeoutException: Read interrupted after stream transferred 0 bytes because inactive socket Socket[addr=PC-GABRIEL/192.168.56.1,port=5000,localport=57241] timed out and was forcibly closed, timeout: 5000 ms
        at oracle.kv.impl.util.registry.RegistryUtils$ExceptionWrappingRegistry.rethrow(RegistryUtils.java:2234)
        at oracle.kv.impl.util.registry.RegistryUtils$ExceptionWrappingRegistry.lookup(RegistryUtils.java:215

Note importante : Une fois le serveur et le client lancé vous pouvez réactiver les ressources désactivées
le wifi/réseau et/ou le firewall et/ou l'antivirus. C'est une solution pas très satisafaisante.

Pour avoir une solution plus stable, j'ai dû autoriser Java (car c'est java qui est lancé) sur le réseau local et public dans le parefeu

Pour cela lancer sur la ligne de commande windows :
Parefeu et protection du réseau

cliquez sur : Parefeu et protection du réseau
puis cliquez sur : Autoriser une application via le parefeu
puis cliquez sur : Modifier les paramètres
chercher les paramètres dont le nom est :
Java (TM) ¨latform SE binary
Cochez les cases : Prive puis Public


Relancer si ce n'est déjà fait le serveur oracle nosql
(a faire uniquement si vous avez précédemment eu une erreur).

Set KVHOME=C:\Logiciels\13_ORACLE_NOSQL\1Last\kv-ce-21.2.46\kv-21.2.46
-- activation du serveur
java -Xmx256m -Xms256m -jar %KVHOME%/lib/kvstore.jar kvlite -secure-config disable


--------------------------------------------------------------------------------------------------------
-- 7.	Exécuter un ping pour vérifier le serveur fonctionne
--------------------------------------------------------------------------------------------------------

Lancer CMD sur la ligne de commande DOS pour ouvrir une autre fenêtre. Puis
fixer KVHOME.

Ma version de KVHOME

Set KVHOME=C:\Logiciels\13_ORACLE_NOSQL\1Last\kv-ce-21.2.46\kv-21.2.46
votre version de KVHOME (voir point 3):
Set KVHOME=?\kv-21.2.19

-- Lancement de PING le point 6 doit avoir été fait
java -jar %KVHOME%\lib\kvstore.jar ping -host localhost -port 5000

Vous devez voir quelque chose comme ceci avec les 2 dernières ligne ou on voit RUNNING :

java -jar %KVHOME%\lib\kvstore.jar ping -host localhost -port 5000
Pinging components of store kvstore based upon topology sequence #14
10 partitions and 1 storage nodes
Time: 2020-10-01 20:35:13 UTC   Version: 21.2.19
Shard Status: healthy:1 writable-degraded:0 read-only:0 offline:0 total:1
Admin Status: healthy
Zone [name=KVLite id=zn1 type=PRIMARY allowArbiters=false masterAffinity=false]   RN Status: online:1 read-only:0 offline:0
Storage Node [sn1] on Gabriel:5000    Zone: [name=KVLite id=zn1 type=PRIMARY allowArbiters=false masterAffinity=false]    Status: RUNNING   Ver: 21.2.19 2020-07-30 12:46:22 UTC  Build id: e07f6d7d73f3 Edition: Enterprise
        Admin [admin1]          Status: RUNNING,MASTER
        Rep Node [rg1-rn1]      Status: RUNNING,MASTER sequenceNumber:307 haPort:5006 available storage size:1023 MB

Si tel n'est pas le cas le revenir au point 6. Votre serveur n'est pas démarré.


--------------------------------------------------------------------------------------------------------
-- 8.	Utilisation du CLI : Client ligne de Commande : Modèle Key/Value
--------------------------------------------------------------------------------------------------------

Lancer CMD sur la ligne de commande DOS pour ouvrir une autre fenêtre. Puis
fixer KVHOME.

Ma version de KVHOME
Set KVHOME=C:\Logiciels\13_ORACLE_NOSQL\1Last\kv-ce-21.2.46\kv-21.2.46

votre version de KVHOME (voir point 3):
Set KVHOME=?\kv-21.2.19

-- activation du client KV qui veut veut dire Clé/Valeur et connexion à la base kvstore
-- Le serveur doit a avoir été démarré correction sans erreur et le ping a fonctionné.
-- Ne pas fermer la fenetre ou le serveur est en attente.
-- S'il y a des erreurs en lançant le client il faut traiter le serveur.

java -jar %KVHOME%/lib/kvcli.jar -host localhost -port 5000 -store kvstore

Vous obtenez :
kv->

Effectuons quelques TEST :

Voir le support de cours pour avoir des détails

kv-> help

cette commande vous donne la liste de toutes les commandes 

-- Pour écrire dans la base commande est PUT
-- Pour voir la syntaxe vers : help PUT
kv-> help put
Vous obtenez :
The put command encapsulates commands that put key/value pairs into a store
and rows into a table.
Usage: put kv |
           table
Cette commande à deux usage :
put kv
C'est le modèle Key Value de Base
ou 
put table
C'est le modèle orienté documents. Une table étant l'équivalent d'une collection mongodb
Le document ici est un objet JSON comme dans mongodb


-- Gestion des informations avec le modèle KEY Value de base 

-- Ajout d'objets
kv-> help put kv 
Usage: put kv -key <key> -value <valueString> [-file] [-hex]
        [-if-absent | -if-present]
        Puts the specified key, value pair into the store
        -file indicates that the value parameter is a file that contains the
        actual value
        -hex indates that the value is a BinHex encoded byte value with Base64
        -if-absent indicates to put a key/value pair only if no value for
        the given key is present.
        -if-present indicates to put a key/value pair only if a value for
        the given key is present.
Attention : Les clés sont des chaines de caractères quelconques. 
Les valeurs aussi. Elles sont case sensitive.

-- Ajout d'un objet quelconque dans la base.
kv->put kv -key /bonjour -value "Bien venue dans le monde du NoSQL : modèle clé valeur"
Operation successful, record inserted.

-- On souhaiterais ajouter des informations sur les pilotes
-- Attention c'est votre programme qui va interprêter le contenu.
-- Car il s'agit d'un objet non structuré.

put kv -key /Gagarin1/Klouchino1Russie/1 -value '{"plnum":1,"plnom":"Gagarin1","dnaiss":"09/03/1934","adr":"Klouchino1, Russie", "tel":"0071122334455", "sal":10000.75}';

put kv -key /Gagarin2/Klouchino2Russie/2 -value 
'{"plnum":2,"plnom":"Gagarin2","dnaiss":"09/03/1935","adr":"Klouchino2, Russie", "tel":"0071122334456", "sal":10050.75}’;

put kv -key /Gagarin2/Moscou1Russie/3 -value 
'{"plnum":3,"plnom":"Gagarin2","dnaiss":"09/03/1960","adr":"Moscou1, Russie", "tel":"0071122334470", "sal":20050.75}';

put kv -key /Gagarin3/Klouchino3Russie/4 -value 
'{"plnum":4,"plnom":"Gagarin3","dnaiss":"09/03/1935","adr":"Klouchino3, Russie", "tel":"00711223344606", "sal":11050.75}';

Nous venons la de créer 4 nouveaux pilotes.

-- On souhaiterais ajouter des informations sur les checkups des pilotes
-- Attention c'est votre programme qui va interprêter le contenu.
-- Car il s'agit d'un objet non structuré.
-- /cnum/x (x de 1 à N) est une minor kéy


put kv -key /Gagarin2/Klouchino2Russie/2/-/cunum/1 -value 
'{"plnum":2,"plnom":"Gagarin2","adr":"Klouchino2, Russie", "cunum":1, "cudate":"12-12-2015", "curesultat": "BON"}';

put kv -key /Gagarin2/Klouchino2Russie/2/-/cunum/2 -value
'{"plnum":2,"plnom":"Gagarin2","adr":"Klouchino2, Russie", "cunum":2, "cudate":"11-1-2016",  "curesultat": "BON p
okMAIS ATTENTION AU THE"}';

put kv -key /Gagarin2/Moscou2Russie/5/-/cunum/1 -value
'{"plnum":5, "plnom":"Gagarin2", "adr":"Moscou2, Russie", "cunum":3, "cudate":"12-12-2015", "curesultat": "BON"}';
Nous venons la de créer 3 checkup.

get kv -key /Gagarin2/Klouchino2Russie/2 -all
get kv -key /Gagarin2/Klouchino2Russie/2/
get kv -key /Gagarin2/Moscou2Russie/5/-/cunum/1




On souhaiterais ajouter des checkup à 
-- Lectures des objets quelconques avec le modèle key/value.
-- La commande pour lire est get kv

kv->help get kv

Usage: get kv -key <key> [-file <output>] [-all] [-keyonly]
        [-valueonly] [-start <prefixString>] [-end <prefixString>]
        Performs a simple get operation on the key in the store.
        -key indicates the key (prefix) to use.  Optional with -all.
        -all is specified for iteration starting at the key, or with
        an empty key to iterate the entire store.
        -start and -end flags can be used for restricting the range used
        for iteration.
        -keyonly works with -all and restricts information to keys.
        -valueonly works with -all and restricts information to values.
        -file is used to specify an output file, which is truncated.


kv->get kv -key /bonjour 
QmllbiB2ZW51ZSBkYW5zIGxlIG1vbmRlIGR1IE5vU1FMIDogbW9kimxlIGNsgiB2YWxldXI= [Base64]

https://base64.guru/converter/decode

/bonjour -value "Bien venue dans le monde du NoSQL : modèle clé valeur"

kv->get kv -key /bonjour -all -valueonly

-- Afficher les informations sur tous les pilotes de nom Gagarin2 
?

-- afficher les informations sur les pilotes de nom Gagarin2 habitant Klouchino2Russie
?

-- afficher les informations sur les checkup du pilote avec la clé major /Gagarin2/Klouchino2Russie/2 

?


--------------------------------------------------------------------------------------------------------
-- 9. Utilisation du CLI : Client ligne de Commande : Modèle TABLES (DOCUMENTS)
--------------------------------------------------------------------------------------------------------

-------------------------------------------------------------------------------------------------
-- Création de tables
-------------------------------------------------------------------------------------------------

-- Création de la table pilote2
execute 'drop table pilote2';

execute 'create table pilote2(
plnum  INTEGER ,  
plnom   STRING, 
dnaiss  STRING, 
adr     STRING, 
tel     STRING, 
sal     FLOAT, 
PRIMARY  KEY (shard(plnom, adr), plnum))';


-- Création de la table pilote2.checkup
-- Un pilote à 0 1 ou plusieurs checkup
-- Une façon d'introduire une pseudo clé étrangère sans contrainte
execute 'drop table pilote2.checkup';
execute  'create table pilote2.checkup(
cunum    	 INTEGER,  
cudate  	 STRING, 
curesultat	 STRING,
PRIMARY  KEY  (cunum))';


-- Création de la table pilote2.training
-- Un pilote fait 0 1 ou plusieurs training
-- Une façon d'introduire une pseudo clé étrangère sans contrainte
execute 'drop table pilote2.training';
execute  'create table pilote2.training(
trnum    	 INTEGER,  
trdate  	 STRING, 
trtypeTraining	 STRING,
trDureeEnHeure	INTEGER,
PRIMARY  KEY  (trnum))';

-------------------------------------------------------------------------------------------------
-- Insertion de lignes
-------------------------------------------------------------------------------------------------


-- insertion de ligne dans table pilote2 avec l'interface ligne de commande kv->

put table -name pilote2 -json 
'{"plnum":1,"plnom":"Gagarin1","dnaiss":"09/03/1934","adr":"Klouchino1, Russie", "tel":"0071122334455", "sal":10000.75}';

put table -name pilote2 -json 
'{"plnum":2,"plnom":"Gagarin2","dnaiss":"09/03/1935","adr":"Klouchino2, Russie", "tel":"0071122334456", "sal":10050.75}’;

put table -name pilote2 -json 
'{"plnum":3,"plnom":"Gagarin2","dnaiss":"09/03/1960","adr":"Moscou1, Russie", "tel":"0071122334470", "sal":20050.75}';

put table -name pilote2 -json 
'{"plnum":4,"plnom":"Gagarin3","dnaiss":"09/03/1935","adr":"Klouchino3, Russie", "tel":"00711223344606", "sal":11050.75}';


-- insertion de ligne dans table pilote2.checkup avec l'interface ligne de commande kv->
put table -name pilote2.checkup -json 
'{"plnum":2,"plnom":"Gagarin2","adr":"Klouchino2, Russie", "cunum":1, "cudate":"12-12-2015", "curesultat": "BON"}';

put table -name pilote2.checkup -json 
'{"plnum":2,"plnom":"Gagarin2","adr":"Klouchino2, Russie", "cunum":2, "cudate":"11-1-2016",  "curesultat": "BON MAIS ATTENTION AU THE"}';

put table -name pilote2.checkup -if-absent -json '{"plnum":5, "plnom":"Gagarin2", "adr":"Moscou2, Russie", "cunum":1, "cudate":"12-12-2015", "curesultat": "BON"}';

-------------------------------------------------------------------------------------------------
-- insertion de ligne dans table pilote2.traning avec l'interface ligne de commande kv->
-- Insérer 3 training deux pour Gagarin2 nr 2
-------------------------------------------------------------------------------------------------

-------------------------------------------------------------------------------------------------
-- insertion de ligne dans table pilote2.traning avec l'interface ligne de commande kv->
-- Insérer 3 training deux pour Gagarin2 nr 2
-------------------------------------------------------------------------------------------------

put table -name pilote2.training -json 
'{"plnum":2,"plnom":"Gagarin2","adr":"Klouchino2, Russie", "trnum":1, "trdate":"12-12-2015", "trtypeTraining": "Simulateur",  "trDureeEnHeure":5}';

put table -name pilote2.training -json 
'{"plnum":2,"plnom":"Gagarin2","adr":"Klouchino2, Russie", "trnum":2, "trdate":"11-1-2016",  "trtypeTraining": "Vol réel", "trDureeEnHeure":2}';

put table -name pilote2.training -json 
'{"plnum":5, "plnom":"Gagarin2", "adr":"Moscou2, Russie", "trnum":1, "trdate":"12-12-2015", "trtypeTraining": "Simulateur",  "trDureeEnHeure":3}';



-------------------------------------------------------------------------------------------------
-- Consultation de données
-------------------------------------------------------------------------------------------------


-- Afficher les informations sur les pilotes  de nom Gagarin2
get table -name pilote2

-- Afficher les informations sur les pilotes  de nom Gagarin2
get table -name pilote2 -field plnom -value "Gagarin2"

-- Afficher les informations sur les pilotes  habitant  "Moscou1, Russie"
get table -name pilote2 -field adr -value "Moscou1, Russie"

execute 'create index idx_pilote2_adr on pilote2(adr)';

-- Afficher les informations sur les pilotes  habitant  "Moscou1, Russie"
get table -name pilote2 -field adr -value "Moscou1, Russie" -index idx_pilote2_adr

-- Afficher les informations sur les checkup du pilote de nom Gagarin2
get table -name pilote2.checkup -field plnom -value "Gagarin2"

-- Que fait cette requête ?
-- Texte ici : ?
get table -name pilote2.checkup -field plnom -value "Gagarin2" -ancestor pilote2

-- Que fait cette requête ?
-- Texte ici : ?
get table -name pilote2 -field plnom -value "Gagarin2" -child pilote2.checkup


-------------------------------------------------------------------------------------------------------
-- Requêtes avec Execute : SELECT, INSERT, UPDATE, DELETE
-- pas de get, pas de put
-------------------------------------------------------------------------------------------------------
-- Insérer un nouveau pilote avec la syntaxe insert into tableName values (?)
?

-- Afficher les informations sur les pilotes  de nom Gagarin2
?

-- Afficher les informations sur les pilotes  de nom Gagarin2
?

-- Afficher les informations sur les pilotes  habitant  "Moscou1, Russie"
?

-- Afficher les informations sur les pilotes  habitant  "Moscou1, Russie"
?

-- Afficher les informations sur les checkup du pilote de nom Gagarin2
?


-- Modidifier le salaire de cd pilote ajouté
?

-- Supprimer le pilote de nom Gagarin2 et ses checkup
?


-- Afficher les informations sur les training du pilote de nom Gagarin2
?

-- Afficher les informations sur les training et les checkup du pilote de nom Gagarin2
?

--------------------------------------------------------------------------------------------------------
-- 10.	Utilisation du client SQL
--------------------------------------------------------------------------------------------------------

-- SQL dans Oracle NOSQL
https://docs.oracle.com/en/database/other-databases/nosql-database/18.1/sqlfornosql/running-shell.html
d:\> Set KVHOME=C:\Logiciels\13_ORACLE_NOSQL\1Last\kv-ce-21.2.46\kv-21.2.46
d:\> java -jar %KVHOME%/lib/sql.jar -helper-hosts localhost:5000 -store kvstore

sql->
drop table pilote3;
drop table pilote3.checkup;
drop table pilote3.training;
create table pilote3.checkup(
drop table pilote2.training;

create table pilote3(
plnum  INTEGER ,  
plnom   STRING, 
dnaiss  STRING, 
adr     STRING, 
tel     STRING, 
sal     FLOAT, 
PRIMARY  KEY (shard(plnom, adr), plnum));


-- Création de la table pilote3.checkup
-- Un pilote à 0 1 ou plusieurs checkup
-- Une façon d'introduire une pseudo clé étrangère sans contrainte
drop table pilote3.checkup;
create table pilote3.checkup(
cunum    	 INTEGER,  
cudate  	 STRING, 
curesultat	 STRING,
PRIMARY  KEY  (cunum));


-- Création de la table pilote3.training
-- Un pilote fait 0 1 ou plusieurs training
-- Une façon d'introduire une pseudo clé étrangère sans contrainte
drop table pilote3.training;
create table pilote3.training(
trnum    	 INTEGER,  
trdate  	 STRING, 
trtypeTraining	 STRING,
trDureeEnHeure	INTEGER,
PRIMARY  KEY  (trnum));


-- Insertion des lignes dans la table pilote3
/*
'{"plnum":1,"plnom":"Gagarin1","dnaiss":"09/03/1934","adr":"Klouchino1, Russie", "tel":"0071122334455", "sal":10000.75}';
'{"plnum":2,"plnom":"Gagarin2","dnaiss":"09/03/1935","adr":"Klouchino2, Russie", "tel":"0071122334456", "sal":10050.75}’;
'{"plnum":3,"plnom":"Gagarin2","dnaiss":"09/03/1960","adr":"Moscou1, Russie", "tel":"0071122334470", "sal":20050.75}';
'{"plnum":4,"plnom":"Gagarin3","dnaiss":"09/03/1935","adr":"Klouchino3, Russie", "tel":"00711223344606", "sal":11050.75}';
*/

insert into pilote3 values (1,"Gagarin1","09/03/1934","Klouchino1, Russie", "0071122334455", 10000.75);
insert into pilote3 values (2,"Gagarin2","09/03/1935","Klouchino2, Russie", "0071122334456", 10050.75);
insert into pilote3 values (3,"Gagarin2","09/03/1960","Moscou1, Russie", "0071122334470", 20050.75);
insert into pilote3 values (4,"Gagarin3","09/03/1935","Klouchino3, Russie", "00711223344606", 11050.75);


-- Insert ces lignes dans la table pilote3.checkup
/*
'{"plnum":2,"plnom":"Gagarin2","adr":"Klouchino2, Russie", "cunum":1, "cudate":"12-12-2015", "curesultat": "BON"}';
'{"plnum":2,"plnom":"Gagarin2","adr":"Klouchino2, Russie", "cunum":2, "cudate":"11-1-2016",  "curesultat": "BON MAIS ATTENTION AU THE"}';
'{"plnum":5, "plnom":"Gagarin2", "adr":"Moscou2, Russie", "cunum":1, "cudate":"12-12-2015", "curesultat": "BON"}';
*/

insert into pilote3.checkup values ("Gagarin2","Klouchino2, Russie", 2, 1, "12-12-2015",  "BON");
insert into pilote3.checkup values ("Gagarin2","Klouchino2, Russie", 2, 2, "11-1-2016", "BON MAIS ATTENTION AU THE");
insert into pilote3.checkup values ("Gagarin2", "Moscou2, Russie",5, 1, "12-12-2015", "BON");

-- Rechercher les pilotes de nom Gagarin2  ?

-- Rechercher les checkups des pilotes de nom Gagarin2 et pour ceux
qui ont des ancêtres leurs ancêtres ?

-- Rechercher les pilotes de nom Gagarin2 et les checkups de nom Gagarin2 ?

-- Lister tous les checkup

-- Lister tous les pilotes

-- Insérer un nouveau pilote avec la syntaxe insert into tableName values (?)
?

-- Modidifier le salaire de cd pilote ajouté
?

-- Supprimer le pilote de nom Gagarin2 et ses checkup
?


--------------------------------------------------------------------------------------------------------
-- Création de la table pilote3.training
--------------------------------------------------------------------------------------------------------
drop table pilote3.training;
-------------------------------------------------------------------------------------------------
-- insertion de ligne dans table pilote2.traning avec l'interface ligne de commande kv->
-- Insérer 3 training deux pour Gagarin2 nr 2
-------------------------------------------------------------------------------------------------

insert into pilote3.training values ("Gagarin2","Klouchino2, Russie", 2, 1, "12-12-2015", "Simulateur", 5);
insert into pilote3.training values ("Gagarin2","Klouchino2, Russie", 2, 2, "11-1-2016",  "Vol réel",2);
insert into pilote3.training values ("Gagarin2", "Moscou2, Russie",   5, 3, "12-12-2015", "Simulateur", 3);




--------------------------------------------------------------------------------------------------------
-- PROGRAMMATION JAVA : NE RIEN FAIRE SANS LES CONSIGNES DE L'ENSEIGNANT
--------------------------------------------------------------------------------------------------------
-- NOUS POURSUIVRONS L'ACVITES CI-DESSOUS DANS UN AUTRE ENVIRONNEMENT QUI SERA INDIQUE PAR
-- L'ENSEIGNANT.
--------------------------------------------------------------------------------------------------------
11.	Compilation et exécution du code java sur la ligne de commande
--------------------------------------------------------------------------------------------------------

d:\> Set KVHOME=C:\Logiciels\13_ORACLE_NOSQL\1Last\kv-ce-21.2.46\kv-21.2.46
-- compilation
set MYTPHOME=D:\Logiciels\OracleNoSql\kv-examples-20.2.19\kv-20.2.19

Télécharger les exemples de code java et déposé les dans le dossier MYTPHOME 
https://www.oracle.com/database/technologies/nosql-database-server-downloads.html
Renommer le dossier examples en tpnosql_examples
Sous MYTPHOME Il y a:
%MYTPHOME%/tpnosql_examples/hello/HelloBigDataWorld.java
Activités à faire ici : %MYCOURSEHOME%\2exercices\ExercicesBigDataNosqlOracle_au_15_10_2020_version_cloud_MBDS_MIAGE.sql

-- compilation HelloBigDataWorld.java
javac -g -cp %KVHOME%/lib/kvclient.jar;%MYTPHOME%/tpnosql_examples %MYTPHOME%/tpnosql_examples/hello/*.java
-- Exécution HelloBigDataWorld
d:\>  java -Xmx256m -Xms256m  -cp %KVHOME%/lib/kvclient.jar;%MYTPHOME%/tpnosql_examples hello.HelloBigDataWorld
Hello Big Data World!

12.	Compilation et exécution du code java sur la ligne de commande : SUITE
Copier les dossiers 
airbase et pkMobileClients
vers %MYTPHOME%\tpnosql_examples

d:\> Set KVHOME=D:\Logiciels\OracleNoSql\kv-ee-21.2.19\kv-21.2.19
-- compilation
set MYTPHOME=D:\Logiciels\OracleNoSql\kv-examples-20.2.19\kv-20.2.19

Sous MYTPHOME Il y a aussi:
%MYTPHOME%/tpnosql_examples/hello/MobileClients.java
Activités à faire ici : %MYCOURSEHOME%\2exercices\ExercicesBigDataNosqlOracle_au_15_10_2020_version_cloud_MBDS_MIAGE.sql

-- compilation de MobileClients.java
javac -g -cp %KVHOME%/lib/kvclient.jar;%MYTPHOME%/tpnosql_examples %MYTPHOME%/tpnosql_examples/pkMobileClients/*.java

-- Exécution de MobileClients
d:\>  java -Xmx256m -Xms256m  -cp %KVHOME%/lib/kvclient.jar;%MYTPHOME%/tpnosql_examples pkMobileClients.MobileClients

Sous MYTPHOME Il y a aussi:
%MYTPHOME%/tpnosql_examples/hello/Airbase.java
Activités à faire ici : %MYCOURSEHOME%\2exercices\ExercicesBigDataNosqlOracle_au_15_10_2020_version_cloud_MBDS_MIAGE.sql

-- compilation de Airbase.java
javac -g -cp %KVHOME%/lib/kvclient.jar;%MYTPHOME%/tpnosql_examples %MYTPHOME%/tpnosql_examples/airbase/*.java

-- Exécution de Airbase
d:\>  java -Xmx256m -Xms256m  -cp %KVHOME%/lib/kvclient.jar;%MYTPHOME%/tpnosql_examples airbase.Airbase

-- 
13.	Consulter via l'interface ligne de commande kv-> les tables créés dans
Airbase.java

14.	Consulter via l'interface ligne de commande sql-> les tables créés dans
Airbase.java

15.	Créer les tables externes dans HIVE qui pointent vers les tables créées 
dans Airbase.java
Activités à faire ici : %MYCOURSEHOME%\2exercices\ExercicesBigDataNosqlOracle_au_15_10_2020_version_cloud_MBDS_MIAGE.sql

16.	Créer les tables externes dans HIVE qui pointent vers les tables créées 
dans Airbase.java
Activités à faire ici : %MYCOURSEHOME%\2exercices\ExercicesBigDataNosqlOracle_au_15_10_2020_version_cloud_MBDS_MIAGE.sql

16.	Créer les tables externes dans Oracle qui pointent vers les tables 
externes HIVE créés au point 16
Activités à faire ici : %MYCOURSEHOME%\2exercices\ExercicesBigDataNosqlOracle_au_15_10_2020_version_cloud_MBDS_MIAGE.sql

17.	Consulter ces tables externes dans Oracle
Activités à faire ici : %MYCOURSEHOME%\2exercices\ExercicesBigDataNosqlOracle_au_15_10_2020_version_cloud_MBDS_MIAGE.sql

18. Construisez Dans HIVE puis Oracle l'accès via Big Data SQL aux fichiers
HADOOP HDFS
Activités à faire ici : %MYCOURSEHOME%\2exercices\ExercicesBigDataNosqlOracle_au_15_10_2020_version_cloud_MBDS_MIAGE.sql



